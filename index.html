<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Quem sou eu na Tabela Peri√≥dica?</title>
  <link rel="icon" href="favicon.ico" type="image/x-icon"> <script src="https://cdn.tailwindcss.com"></script>  
  <style>

    .element {
      transition: transform 0.2s;
    }
    .element:hover {
      transform: scale(1.05);
    }
    /* Estilo para o elemento eliminado */
    .element.eliminated {
      opacity: 0.2; /* Torna o elemento mais transparente */
      pointer-events: none; /* Desabilita cliques no elemento */
      text-decoration: line-through; /* Opcional: risca o texto */
      background-color: #efefef !important; /* Mudar a cor de fundo para algo neutro */
      color: #999 !important; /* Mudar a cor do texto */
      transform: none !important; /* Remove qualquer transforma√ß√£o de hover */
      border: none !important; /* Remove bordas de sele√ß√£o */
    }

    .grid-tabela {
      display: grid;
      grid-template-columns: repeat(19, minmax(0, 1fr));
      gap: 0.25rem;
      min-width: 1500px;
    }
    @media (max-width: 768px) {
      .grid-tabela {
        grid-template-columns: repeat(19, minmax(30px, 1fr));
      }
    }

    /* Anima√ß√£o das f√≥rmulas qu√≠micas no fundo */
    @keyframes moveBg {
      0% { transform: translateX(0); }
      100% { transform: translateX(150%); }
    }
    .chemical-bg .chem-symbol {
      position: absolute;
      font-size: 3rem;
      font-weight: bold;
      color: rgba(255,255,255,0.08);
      white-space: nowrap;
      animation: moveBg 15s linear infinite;
    }

    /* Responsividade no t√≠tulo */
    .text-balance {
      display: block;
      text-wrap: balance;
    }

    /* M√°quina de escrever */
    @keyframes typing {
      from { width: 0 }
      to { width: 100% }
    }
    @keyframes blink {
      50% { border-color: transparent }
    }
    .typewriter {
      display: inline-block;
      overflow: hidden;
      border-right: 2px solid white;
      white-space: nowrap;
      width: 0;
      animation:
        typing 4s steps(50, end) forwards,
        blink 1s step-end infinite;
    }

    /* Fade e Slide */
    @keyframes fade-up {
      0% { opacity: 0; transform: translateY(30px); }
      100% { opacity: 1; transform: translateY(0); }
    }
    @keyframes slide-up {
      0% { transform: translateY(50px); }
      100% { transform: translateY(0); }
    }
    .animate-fade-up {
      animation: fade-up 1s ease-out forwards;
    }
    .animate-slide-up {
      animation: slide-up 1.2s ease-out forwards;
    }
  </style>
</head>
<body>
  <div id="status-voz" aria-live="polite" class="sr-only" style="position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0, 0, 0, 0); white-space: nowrap; border-width: 0;"></div>
    <header class="relative text-center py-10 px-6 bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-500 text-white overflow-hidden shadow-lg">
        <div class="absolute top-0 left-0 w-full h-full pointer-events-none">
            <div class="absolute w-6 h-6 bg-green-300 rounded-full opacity-70 animate-ping" style="top:20%; left:10%;"></div>
            <div class="absolute w-8 h-8 bg-blue-300 rounded-full opacity-60 animate-ping" style="top:40%; left:30%;"></div>
            <div class="absolute w-4 h-4 bg-yellow-300 rounded-full opacity-50 animate-ping" style="top:60%; left:50%;"></div>
            <div class="absolute w-10 h-10 bg-pink-300 rounded-full opacity-40 animate-ping" style="top:30%; left:70%;"></div>
            <div class="absolute w-5 h-5 bg-purple-300 rounded-full opacity-60 animate-ping" style="top:50%; left:80%;"></div>
        </div>

        <h1 class="text-[clamp(2.5rem,5vw,5rem)] font-extrabold drop-shadow-lg">Quem sou eu na Tabela Peri√≥dica?</h1>
        <p class="text-lg mt-2 italic px-4">Uma Tabela Peri√≥dica Interativa inspirada pelo jogo "Quem sou eu?" </p>

        <div class="flex justify-center mt-6 space-x-6">
            <div class="w-10 h-20 bg-blue-400 rounded-b-full shadow-lg animate-bounce"></div>
            <div class="w-8 h-16 bg-green-400 rounded-b-full shadow-lg animate-pulse"></div>
            <div class="w-6 h-12 bg-yellow-400 rounded-b-full shadow-md animate-bounce"></div>
            <div class="w-12 h-24 bg-pink-400 rounded-b-full shadow-lg animate-pulse"></div>
        </div>
    </header>
  
<section class="max-w-7xl mx-auto mt-6 p-6 bg-white rounded-lg shadow-md border-2 border-indigo-500 text-center">
    <h3 class="font-bold text-lg mb-2 text-indigo-700">Painel de Jogo Sincronizado üß™</h3>
    
<div class="flex gap-4 mb-4">
    <input type="text" id="codigo-sala" placeholder="Ex: QUIMICA01" aria-label="Digite o c√≥digo da sala" class="border p-2 rounded w-full outline-none focus:border-purple-500">
    <button onclick="conectarSala()" aria-label="Bot√£o para conectar na sala" class="bg-indigo-600 text-white px-6 py-2 rounded font-bold hover:bg-indigo-700">Conectar Sala</button>
</div>
    <p id="status-sala" class="text-sm mb-6 text-gray-500 italic">Status: Aguardando conex√£o... üîå</p>

    <div id="container-selecao-equipe" class="bg-gray-100 p-4 rounded-xl mb-6">
        <p id="titulo-equipe" class="font-bold text-gray-700 mb-2">Escolha sua Equipe:</p>
        <div id="botoes-equipe" class="flex justify-center gap-4">
            <button onclick="definirEquipe('A')" id="btn-equipe-a" class="px-6 py-2 bg-white border-2 border-blue-600 text-blue-600 rounded-lg font-bold hover:bg-blue-50">Entrar no Grupo A</button>
            <button onclick="definirEquipe('B')" id="btn-equipe-b" class="px-6 py-2 bg-white border-2 border-pink-600 text-pink-600 rounded-lg font-bold hover:bg-pink-50">Entrar no Grupo B</button>
        </div>
        <p id="msg-trava" class="text-[10px] text-red-500 hidden mt-2">* Equipe travada para esta rodada.</p>
    </div>

    <div id="controles-sorteio" class="flex flex-wrap justify-center gap-4 border-t pt-4">
        <p class="w-full text-xs text-gray-400 mb-2">Controles de Re-sorteio:</p>
        <button id="btn-sortear-a" onclick="sortearParaAdversario('A')" class="bg-blue-600 text-white px-4 py-2 rounded font-bold shadow-md">Gerar Segredo Grupo A üë§</button>
        <button id="btn-sortear-b" onclick="sortearParaAdversario('B')" class="bg-pink-600 text-white px-4 py-2 rounded font-bold shadow-md">Gerar Segredo Grupo B üë•</button>
    </div>

<div id="painel-secreto" class="w-full mt-6 p-6 rounded-2xl hidden shadow-xl animate-pulse text-white" role="region" aria-live="assertive">
    <h4 class="font-bold uppercase text-xs tracking-widest opacity-80">Seu Elemento Secreto:</h4>
    <div id="display-elemento-secreto" class="text-4xl font-black mt-2" aria-label="Elemento sorteado">--</div>
</div>
</section>
  
    <section class="bg-gray-100 text-gray-800 py-6 px-8 rounded shadow-md max-w-7xl mx-auto mt-6 mb-6">
        <h2 class="text-3xl font-bold mb-2">Sobre esta Tabela Peri√≥dica</h2>
        <ol class="list-none text-lg space-y-2">
            <li>Esta Tabela Peri√≥dica Interativa foi desenvolvida como suporte pedag√≥gico para o jogo did√°tico "Quem sou eu na Tabela Peri√≥dica?" criado pelos alunos do curso de Licenciatura em Qu√≠mica do Instituto Federal de Educa√ß√£o, Ci√™ncia e Tecnologia do Cear√° ‚Äì Campus Aracati. O objetivo √© tornar o ensino de Qu√≠mica mais din√¢mico, estimulando a curiosidade, a formula√ß√£o de perguntas e a aprendizagem atrav√©s da ludicidade.</li>
        </ol>
    </section>

<section class="bg-gray-100 text-gray-800 py-6 px-8 rounded shadow-md max-w-7xl mx-auto mt-6 mb-12">
        <h2 class="text-3xl font-bold mb-4 border-b-2 border-indigo-500 pb-2">Como Jogar "Quem sou eu na Tabela Peri√≥dica?"</h2>
        <ol class="list-decimal list-inside text-lg space-y-4">
            <li>
                <strong>Conex√£o e Prepara√ß√£o:</strong> Digite o c√≥digo da sala e conecte-se. O professor (ou l√≠der) deve clicar em <span class="text-green-600 font-bold">"Gerar Nova Rodada"</span>. Isso iluminar√° 24 elementos aleat√≥rios na tabela para todos os jogadores simultaneamente.
            </li>
            <li>
                <strong>Sincronia com o Jogo F√≠sico:</strong> Observe os 24 elementos que ficaram ativos (coloridos) na tela. 
                <b class="text-indigo-700">Cada grupo deve agora pegar suas cartas f√≠sicas e separar apenas os elementos que aparecem na tabela virtual.</b> Estes ser√£o os √∫nicos elementos v√°lidos para a rodada.
            </li>
            <li>
                <strong>Escolha de Equipe e Segredo:</strong> Clique em "Entrar no Grupo A" ou "B". O sistema sortear√° automaticamente o seu <strong>Elemento Secreto</strong> (o elemento que o grupo advers√°rio ter√° que adivinhar). Ele aparecer√° no painel colorido.
            </li>
            <li>
                <strong>Dedu√ß√£o e Perguntas:</strong> Fa√ßam perguntas sobre as propriedades qu√≠micas (Ex: "√â um metal?", "√â gasoso?"). 
                Use o bot√£o <b>"Sugest√£o de Pergunta ü§î"</b> para ajudar.
            </li>
            <li>
                <strong>Elimina√ß√£o Digital:</strong> Quando uma resposta descartar um elemento, clique sobre ele na tabela e selecione <span class="text-red-600 font-bold">"Eliminar Elemento"</span>. Ele ficar√° cinza e riscado, ajudando voc√™ a visualizar o que resta.
            </li>
            <li>
                <strong>Vit√≥ria:</strong> O grupo que descobrir o elemento secreto do advers√°rio primeiro, usando as pistas e a tabela virtual como guia, vence a rodada! 
            </li>
            <li>
                <strong>Reset:</strong> Para uma nova partida, clique em "Resetar Jogo üîÑ" e, em seguida, o professor gera uma nova rodada de 24 elementos.
            </li>
        </ol>
    </section>

  <div class="text-center mt-32 mb-8">
    <h2 class="typewriter text-4xl font-extrabold text-gray-800 mx-auto max-w-fit px-4">
        A Tabela Peri√≥dica
    </h2>
</div>
  
<main class="max-w-7xl mx-auto p-4 mt-12">
    
    <div class="overflow-x-auto">
      <div class="grid-tabela" id="tabela-container"></div>
    </div>
    
<div id="info-panel" class="mt-8 p-4 border-2 rounded hidden bg-blue-50 relative" role="dialog" aria-labelledby="element-name">
  <button onclick="fecharInfo()" aria-label="Fechar informa√ß√µes do elemento" class="absolute top-2 right-2 text-red-600 font-bold text-xl hover:scale-110 transition-transform duration-300">‚úñÔ∏è</button>
  
  <h2 id="element-name" class="text-2xl font-bold"></h2>
  
  <div aria-atomic="true" aria-live="polite">
      <p><strong>S√≠mbolo:</strong> <span id="element-symbol"></span></p>
      <p><strong>N√∫mero at√¥mico:</strong> <span id="element-number"></span></p>
      <p><strong>Massa at√¥mica:</strong> <span id="element-mass"></span></p>
      <p><strong>Estado F√≠sico:</strong> <span id="element-state"></span></p>
      <p><strong>Aplica√ß√£o:</strong> <span id="element-application"></span></p>
      <p id="element-temp-info" class="text-sm italic text-gray-600"></p>
  </div>
  
  <button onclick="eliminarElemento()" aria-label="Confirmar elimina√ß√£o deste elemento" class="mt-4 px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600 transition-colors">
    Eliminar Elemento
  </button>

  <button onclick="darPalpite()" class="flex-1 px-4 py-3 bg-green-600 text-white font-bold rounded-lg hover:bg-green-700 active:scale-95 transition-all shadow-lg shadow-green-200">
      Dar Palpite! üèÜ
    </button>
  
</div>

    <div class="mt-8 p-4 border rounded bg-gray-100">
      <h3 class="font-bold mb-4 text-lg">Guia de Cores por Grupo:</h3>
      <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4 text-sm">
        <div class="flex items-center"><span class="inline-block w-4 h-4 bg-purple-600 mr-2 rounded-sm"></span>Metais alcalinos</div>
        <div class="flex items-center"><span class="inline-block w-4 h-4 bg-red-400 mr-2 rounded-sm"></span>Metais alcalino-terrosos</div>
        <div class="flex items-center"><span class="inline-block w-4 h-4 bg-orange-400 mr-2 rounded-sm"></span>Metais de transi√ß√£o</div>
        <div class="flex items-center"><span class="inline-block w-4 h-4 bg-yellow-500 mr-2 rounded-sm"></span>Semimetais</div>
        <div class="flex items-center"><span class="inline-block w-4 h-4 bg-green-500 mr-2 rounded-sm"></span>N√£o-metais</div>
        <div class="flex items-center"><span class="inline-block w-4 h-4 bg-pink-500 mr-2 rounded-sm"></span>Halog√™nios</div>
        <div class="flex items-center"><span class="inline-block w-4 h-4 bg-teal-500 mr-2 rounded-sm"></span>Semicondutores</div>
        <div class="flex items-center"><span class="inline-block w-4 h-4 bg-blue-500 mr-2 rounded-sm"></span>Gases nobres</div>
        <div class="flex items-center"><span class="inline-block w-4 h-4 bg-gray-300 mr-2 rounded-sm"></span>Outros</div>
      </div>
    </div>
  </main>

  <section class="text-center mt-12">
    <button onclick="gerarPergunta()" class="px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-500 text-white font-semibold rounded-lg shadow-lg hover:scale-105 transition-transform duration-300">
      Sugest√£o de Pergunta ü§î
    </button>
    <p id="pergunta-gerada" class="mt-4 text-lg font-bold text-purple-700"></p>
  </section>
  
  <section class="text-center mt-8">
      <button onclick="resetarJogo()" class="px-6 py-3 bg-gray-700 text-white font-semibold rounded-lg shadow-lg hover:scale-105 transition-transform duration-300">
          Resetar Jogo üîÑ
      </button>
    
  </section>
      
<section class="text-center mt-4">
    <button onclick="sortearElementosParaSala()" class="px-6 py-3 bg-green-600 text-white font-bold rounded-lg shadow-lg hover:bg-green-700 transition-all">
        Gerar Nova Rodada para o Grupo üé≤
    </button>
</section>
      
  <footer class="mt-16 py-10 px-4 bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-500 text-white shadow-2xl relative overflow-hidden animate-fade-up animate-slide-up">
  <div class="chemical-bg absolute inset-0 overflow-hidden pointer-events-none" aria-hidden="true">      
      <span class="chem-symbol" style="top:10%; left:-50%;">H‚ÇÇO</span>
      <span class="chem-symbol" style="top:30%; left:10%;">NaCl</span>
      <span class="chem-symbol" style="top:50%; left:-30%;">CO‚ÇÇ</span>
      <span class="chem-symbol" style="top:70%; left:0%;">NH‚ÇÉ</span>
      <span class="chem-symbol" style="top:20%; left:-50%;">CH‚ÇÑ</span>
      <span class="chem-symbol" style="top:20%; left:-40%;">C‚ÇÜH‚ÇÅ‚ÇÇO‚ÇÜ</span>
      <span class="chem-symbol" style="top:80%; left:-60%;">HCl</span>
      <span class="chem-symbol" style="top:90%; left:-30%;">O‚ÇÇ</span>
    </div>

    <div class="max-w-7xl mx-auto text-center relative z-10">
      <h2 class="text-white font-extrabold mb-3 leading-tight text-center text-[clamp(1.3rem,4vw,2.5rem)] break-words">
        Projeto Educativo: Quem Sou Eu na Tabela Peri√≥dica?
      </h2>
      <p class="mb-4 text-lg">Desenvolvido pelos alunos de Licenciatura em Qu√≠mica - IFCE Campus Aracati üß™üî¨</p>
      <p class="italic text-sm">Combinando tecnologia, ludicidade e ci√™ncia para transformar a aprendizagem! üöÄ‚öóÔ∏è</p>

      <div class="mt-6 text-sm leading-relaxed">
        <p><strong>Autores:</strong></p>
        <p>Matheus Monteiro do Vale </p>
        <p>Werton Vitor Santos Nascimento </p>
        <p>Brandon Igor Santos Mota </p>
        <p><strong>Professora Orientadora:</strong> Otilia M√¥nica Alves Borges </p>
      </div>
    </div>
  </footer>
  
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  
  <script>
    const nomesEmPortugues = {
      1: "Hidrog√™nio", 2: "H√©lio", 3: "L√≠tio", 4: "Ber√≠lio", 5: "Boro", 6: "Carbono", 7: "Nitrog√™nio", 8: "Oxig√™nio", 9: "Fl√∫or", 10: "Ne√¥nio",
      11: "S√≥dio", 12: "Magn√©sio", 13: "Alum√≠nio", 14: "Sil√≠cio", 15: "F√≥sforo", 16: "Enxofre", 17: "Cloro", 18: "Arg√¥nio",
      19: "Pot√°ssio", 20: "C√°lcio", 21: "Esc√¢ndio", 22: "Tit√¢nio", 23: "Van√°dio", 24: "Cromo", 25: "Mangan√™s", 26: "Ferro", 27: "Cobalto", 28: "N√≠quel", 29: "Cobre", 30: "Zinco",
      31: "G√°lio", 32: "Germ√¢nio", 33: "Ars√™nio", 34: "Sel√™nio", 35: "Bromo", 36: "Cript√¥nio", 37: "Rub√≠dio", 38: "Estr√¥ncio", 39: "√çtrio", 40: "Zirc√¥nio", 41: "Ni√≥bio", 42: "Molibd√™nio",
      43: "Tecn√©cio", 44: "Rut√™nio", 45: "R√≥dio", 46: "Pal√°dio", 47: "Prata", 48: "C√°dmio", 49: "√çndio", 50: "Estanho", 51: "Antim√¥nio", 52: "Tel√∫rio", 53: "Iodo", 54: "Xen√¥nio",
      55: "C√©sio", 56: "B√°rio", 57: "Lant√¢nio", 58: "C√©rio", 59: "Praseod√≠mio", 60: "Neod√≠mio", 61: "Prom√©cio", 62: "Sam√°rio", 63: "Eur√≥pio", 64: "Gadol√≠nio", 65: "T√©rbio", 66: "Dispr√≥sio",
      67: "H√≥lmio", 68: "√ârbio", 69: "T√∫lio", 70: "It√©rbio", 71: "Lut√©cio", 72: "H√°fnio", 73: "T√¢ntalo", 74: "Tungst√™nio", 75: "R√™nio", 76: "√ìsmio", 77: "Ir√≠dio", 78: "Platina", 79: "Ouro",
      80: "Merc√∫rio", 81: "T√°lio", 82: "Chumbo", 83: "Bismuto", 84: "Pol√¥nio", 85: "Astato", 86: "Rad√¥nio", 87: "Fr√¢ncio", 88: "R√°dio", 89: "Act√≠nio", 90: "T√≥rio", 91: "Protact√≠nio",
      92: "Ur√¢nio", 93: "Nept√∫nio", 94: "Plut√¥nio", 95: "Amer√≠cio", 96: "C√∫rio", 97: "Berqu√©lio", 98: "Calif√≥rnio", 99: "Einst√™nio", 100: "F√©rmio", 101: "Mendel√©vio", 102: "Nob√©lio",
      103: "Laur√™ncio", 104: "Rutherf√≥rdio", 105: "D√∫bnio", 106: "Seab√≥rgio", 107: "B√≥hrio", 108: "H√°ssio", 109: "Meitn√©rio", 110: "Darmst√°dtio", 111: "Roentg√™nio", 112: "Copern√≠cio",
      113: "Nih√¥nio", 114: "Fler√≥vio", 115: "Mosc√≥vio", 116: "Liverm√≥rio", 117: "Tenessino", 118: "Oganess√¥nio"
    };

    const aplicacoesEmPortugues = {
      "Hydrogen": "Usado em foguetes e rea√ß√µes qu√≠micas üöÄ",
      "Helium": "G√°s usado em bal√µes e em resson√¢ncia magn√©tica üéàüß≤",
      "Lithium": "Utilizado em baterias recarreg√°veis üîã",
      "Beryllium": "Usado em ligas leves e estruturas aeroespaciais ‚úàÔ∏è",
      "Boron": "Empregado em vidros resistentes ao calor e detergentes üî¨üßº",
      "Carbon": "Base da vida e usado em materiais como grafite e diamante üíé‚úèÔ∏è",
      "Nitrogen": "Utilizado em fertilizantes e como g√°s inerte em embalagens üåæüì¶",
      "Oxygen": "Essencial para a respira√ß√£o e suporte m√©dico üè•",
      "Fluorine": "Presente em cremes dentais e na produ√ß√£o de Teflon üòÅüç≥",
      "Neon": "Usado em sinais luminosos e ilumina√ß√£o decorativa üí°üéá",
      "Sodium": "Componente do sal de cozinha e usado em l√¢mpadas üî¶üßÇ",
      "Magnesium": "Usado em ligas met√°licas leves e fogos de artif√≠cio üéÜüèçÔ∏è",
      "Aluminum": "Usado em embalagens, latas e constru√ß√£o ü•´üèóÔ∏è",
      "Silicon": "Base de chips eletr√¥nicos e pain√©is solares üíªüîÜ",
      "Phosphorus": "Usado em fertilizantes, detergentes e fogos de artif√≠cio üå±‚ú®",
      "Sulfur": "Utilizado em pneus, fertilizantes e p√≥lvora üöóüí•",
      "Chlorine": "Empregado no tratamento de √°gua e na produ√ß√£o de pl√°sticos üíßüß¥",
      "Argon": "G√°s inerte usado em soldagem e l√¢mpadas fluorescentes üîßüí°",
      "Potassium": "Importante para a sa√∫de e usado em fertilizantes üçåüåø",
      "Calcium": "Presente em ossos, cimento e suplementos alimentares ü¶¥üèóÔ∏è",
      "Scandium": "Usado em ligas leves e l√¢mpadas especiais üí°‚öôÔ∏è",
      "Titanium": "Empregado em pr√≥teses, avi√µes e joias resistentes ü¶ø‚úàÔ∏èüíç",
      "Vanadium": "Usado para fortalecer a√ßo e em baterias üî©üîã",
      "Chromium": "Utilizado para dar brilho ao a√ßo inoxid√°vel e em pigmentos ‚ú®üé®",
      "Manganese": "Usado em ligas de a√ßo e baterias üîãüõ†Ô∏è",
      "Iron": "Componente principal do a√ßo, usado na constru√ß√£o üèóÔ∏è",
      "Cobalt": "Utilizado em baterias e tintas azuis üîãüé®",
      "Nickel": "Empregado em moedas, baterias e ligas met√°licas ü™ôüîã",
      "Copper": "Usado em fios el√©tricos e encanamentos ‚ö°üö∞",
      "Zinc": "Presente em ligas e protetor solar ‚öôÔ∏èüß¥",
      "Gallium": "Utilizado em chips e term√¥metros sem merc√∫rio üå°Ô∏èüíª",
      "Germanium": "Empregado em fibras √≥pticas e semicondutores üåêüì°",
      "Arsenic": "Usado em pesticidas e ligas met√°licas ‚ö†Ô∏èüåæ",
      "Selenium": "Usado em fotocopiadoras e suplementos üåûüìÑ",
      "Bromine": "Utilizado em retardadores de chama e fotografia üî•üì∏",
      "Krypton": "Usado em l√¢mpadas e fotografia de alta velocidade üí°üì∑",
      "Rubidium": "Empregado em pesquisas e rel√≥gios at√¥micos ‚è±Ô∏èüî¨",
      "Strontium": "Utilizado em fogos de artif√≠cio vermelhos e cer√¢micas üéÜüç∂",
      "Yttrium": "Usado em LEDs e f√≥sforos de TV üì∫üí°",
      "Zirconium": "Utilizado em reatores nucleares e joias artificiais ‚ò¢Ô∏èüíç",
      "Niobium": "Usado para fortalecer a√ßo e em supercondutores ‚öôÔ∏è‚ùÑÔ∏è",
      "Molybdenum": "Empregado em ligas de alta resist√™ncia e lubrificantes üõ¢Ô∏èüî©",
      "Technetium": "Usado em medicina nuclear e diagn√≥sticos m√©dicos üß¨üè•",
      "Ruthenium": "Empregado em contatos el√©tricos e catalisadores ‚ö°‚öóÔ∏è",
      "Rhodium": "Usado em catalisadores automotivos e joias üöóüíé",
      "Palladium": "Utilizado em eletr√¥nicos e purificadores de escapamento üîåüöó",
      "Silver": "Empregado em joias, fotografia e eletr√¥nicos üì∑üíç",
      "Cadmium": "Utilizado em baterias e pigmentos ‚ö†Ô∏èüîã",
      "Indium": "Usado em telas sens√≠veis ao toque e ligas üíªüëÜ",
      "Tin": "Presente em latas e ligas met√°licas ü•´üî©",
      "Antimony": "Usado em retardadores de chama e ligas üî•‚öôÔ∏è",
      "Tellurium": "Empregado em ligas e semicondutores ‚öôÔ∏èüíª",
      "Iodine": "Utilizado em medicina e como suplemento alimentar üßÇüè•",
      "Xenon": "Usado em l√¢mpadas e anestesia üí°üí§",
      "Cesium": "Empregado em rel√≥gios at√¥micos e explora√ß√£o petrol√≠fera ‚è±Ô∏èüõ¢Ô∏è",
      "Barium": "Usado em exames m√©dicos e fogos de artif√≠cio üéÜüè•",
      "Lanthanum": "Empregado em lentes e baterias üîçüîã",
      "Cerium": "Utilizado em polidores e catalisadores üßΩ‚öóÔ∏è",
      "Praseodymium": "Usado em √≠m√£s fortes e vidros especiais üß≤ü•Ω",
      "Neodymium": "Empregado em √≠m√£s potentes e fones de ouvido üéßüß≤",
      "Promethium": "Usado em baterias nucleares e pesquisas üîã‚ò¢Ô∏è",
      "Samarium": "Empregado em √≠m√£s e reatores nucleares üß≤‚ò¢Ô∏è",
      "Europium": "Usado em telas e l√¢mpadas fluorescentes üì∫üí°",
      "Gadolinium": "Utilizado em exames de resson√¢ncia magn√©tica üß≤üè•",
      "Terbium": "Usado em telas e dispositivos eletr√¥nicos üì±üì∫",
      "Dysprosium": "Empregado em √≠m√£s e reatores nucleares üß≤‚ò¢Ô∏è",
      "Holmium": "Usado em lasers m√©dicos e √≠m√£s potentes üî¨üß≤",
      "Erbium": "Empregado em fibras √≥pticas e lasers üåêüî¶",
      "Thulium": "Utilizado em equipamentos de raio X e lasers m√©dicos ‚ò¢Ô∏èüî¨",
      "Ytterbium": "Usado em lasers e pesquisas cient√≠ficas üî¨üî¶",
      "Lutetium": "Empregado em PET scan e catalisadores m√©dicos üß†‚öóÔ∏è",
      "Hafnium": "Usado em reatores nucleares e chips eletr√¥nicos ‚ò¢Ô∏èüíæ",
      "Tantalum": "Utilizado em capacitores e implantes m√©dicos üîãü¶¥",
      "Tungsten": "Empregado em filamentos de l√¢mpadas e ferramentas pesadas üí°üîß",
      "Rhenium": "Usado em motores a jato e ligas resistentes ao calor ‚úàÔ∏èüî•",
      "Osmium": "Empregado em canetas de luxo e contatos el√©tricos üñãÔ∏è‚ö°",
      "Iridium": "Usado em velas de igni√ß√£o e equipamentos cient√≠ficos ‚ö°üî¨",
      "Platinum": "Empregado em joias e catalisadores üíç‚öóÔ∏è",
      "Gold": "Usado em joias, eletr√¥nicos e reserva de valor üíçüí∞",
      "Mercury": "Utilizado em term√¥metros e l√¢mpadas fluorescentes üå°Ô∏èüí°",
      "Thallium": "Empregado em eletr√¥nicos e medicina ‚ö†Ô∏èüî¨",
      "Lead": "Usado em baterias e prote√ß√£o contra radia√ß√£o üîã‚ò¢Ô∏è",
      "Bismuth": "Utilizado em cosm√©ticos e medicamentos üíÑüíä",
      "Polonium": "Empregado em fontes de calor para sondas espaciais üöÄüî•",
      "Astatine": "Usado em pesquisas e tratamento de c√¢ncer üß¨üè•",
      "Radon": "G√°s radioativo usado em terapia contra c√¢ncer ‚ò¢Ô∏èüè•",
      "Francium": "Extremamente raro, usado apenas em pesquisas üî¨‚öõÔ∏è",
      "Radium": "Hist√≥rico em pintura de mostradores, hoje em pesquisas ‚öõÔ∏èüï∞Ô∏è",
      "Actinium": "Empregado em terapias contra c√¢ncer e pesquisas ‚ò¢Ô∏èüè•",
      "Thorium": "Usado como combust√≠vel nuclear alternativo ‚ò¢Ô∏èüî•",
      "Protactinium": "Utilizado apenas em pesquisas nucleares ‚öõÔ∏èüî¨",
      "Uranium": "Empregado em energia nuclear e armamento ‚ò¢Ô∏è‚öîÔ∏è",
      "Neptunium": "Usado em pesquisas nucleares ‚ò¢Ô∏èüî¨",
      "Plutonium": "Empregado em energia e armas nucleares ‚ò¢Ô∏èüí£",
      "Americium": "Utilizado em detectores de fuma√ßa üö®üî•",
      "Curium": "Usado em sondas espaciais e pesquisas nucleares üöÄ‚ò¢Ô∏è",
      "Berkelium": "Empregado em pesquisas cient√≠ficas avan√ßadas üî¨‚öõÔ∏è",
      "Californium": "Usado em detectores de ouro e pesquisas nucleares ü™ôüî¨",
      "Einsteinium": "Utilizado em pesquisas cient√≠ficas avan√ßadas ‚öõÔ∏èüî¨",
      "Fermium": "Empregado apenas em pesquisas nucleares ‚öõÔ∏èüß™",
      "Mendelevium": "Usado em estudos cient√≠ficos ‚öóÔ∏èüî¨",
      "Nobelium": "Empregado em experimentos cient√≠ficos ‚öõÔ∏èüî¨",
      "Lawrencium": "Utilizado em pesquisas qu√≠micas e nucleares üî¨‚ò¢Ô∏è",
      "Rutherfordium": "Elemento sint√©tico usado em pesquisas cient√≠ficas ‚öóÔ∏èüî¨",
      "Dubnium": "Utilizado apenas em pesquisas cient√≠ficas ‚öõÔ∏èüî¨",
      "Seaborgium": "Elemento sint√©tico para estudos laboratoriais üß™üî¨",
      "Bohrium": "Usado em experimentos cient√≠ficos ‚öóÔ∏èüî¨",
      "Hassium": "Empregado em estudos te√≥ricos de qu√≠mica ‚öõÔ∏èüß†",
      "Meitnerium": "Elemento altamente inst√°vel para pesquisas ‚öõÔ∏èüß™",
      "Darmstadtium": "Utilizado apenas em laborat√≥rios cient√≠ficos üß™üî¨",
      "Roentgenium": "Elemento sint√©tico para estudos qu√≠micos ‚öõÔ∏èüî¨",
      "Copernicium": "Estudado em laborat√≥rios para pesquisa at√¥mica ‚öõÔ∏èüî¨",
      "Nihonium": "Elemento superpesado estudado em pesquisas ‚öõÔ∏èüî¨",
      "Flerovium": "Empregado em investiga√ß√µes cient√≠ficas avan√ßadas üß¨üî¨",
      "Moscovium": "Utilizado em estudos at√¥micos e nucleares ‚öõÔ∏èüî¨",
      "Livermorium": "Pesquisado em laborat√≥rios de f√≠sica nuclear ‚öõÔ∏èüî¨",
      "Tennessine": "Elemento sint√©tico altamente inst√°vel ‚öóÔ∏èüß™",
      "Oganesson": "Elemento superpesado te√≥rico, usado em pesquisas ‚öõÔ∏èüî¨"
    };

    const estadosFisicos = {
      "Solid": "S√≥lido üß±",
      "Liquid": "L√≠quido üíß",
      "Gas": "Gasoso üí®"
    };

    let selectedElementNumber = null; // Vari√°vel para armazenar o n√∫mero do elemento selecionado

// Fun√ß√£o showElementInfo com o ajuste para o Palpite funcionar
function showElementInfo(name, number, symbol, mass, application, estadoFisico, meltTemp, boilTemp) {
  const currentSelected = document.querySelector('.element.border-blue-500');
  if (currentSelected) {
    currentSelected.classList.remove('border-blue-500', 'border-4');
  }

  document.getElementById('element-name').innerText = name;
  document.getElementById('element-symbol').innerText = symbol;
  document.getElementById('element-number').innerText = number;
  document.getElementById('element-mass').innerText = mass + " u";      
  document.getElementById('element-application').innerText = application;
  document.getElementById('element-state').innerText = estadoFisico;

  // AJUSTE DE VOZ: Avisa ao aluno com baixa vis√£o que os detalhes apareceram
  const locutor = document.getElementById('status-voz');
  locutor.innerText = `Detalhes de ${name} exibidos abaixo. Aplica√ß√£o: ${application}`;

  const tempInfo = document.getElementById('element-temp-info');
  if (meltTemp !== null && boilTemp !== null) {
      tempInfo.innerHTML = `(Fus√£o: ${meltTemp.toFixed(2)} ¬∞C, Ebuli√ß√£o: ${boilTemp.toFixed(2)} ¬∞C)`;
  } 

  document.getElementById('info-panel').classList.remove('hidden');
  
  const clickedElement = document.querySelector(`.element[data-number="${number}"]`);
  if (clickedElement) {
    clickedElement.classList.add('border-blue-500', 'border-4');
  }
  
  // Isso exporta o n√∫mero para que o script do Firebase (o Palpite) consiga enxergar
  window.selectedElementNumber = number; 
}

    let tamanhoFonteAtual = 16;

function toggleAcessibilidade() {
    const menu = document.getElementById('menu-acessibilidade');
    menu.classList.toggle('hidden');
}

function anunciarVozNovamente() {
    const nome = document.getElementById('element-name').innerText;
    const app = document.getElementById('element-application').innerText;
    if (nome && typeof anunciarVoz === 'function') {
        anunciarVoz(`Revisando dados: ${nome}. Aplica√ß√£o: ${app}`);
    }
}

function mudarFonte(delta) {
    tamanhoFonteAtual += delta;
    // Aplica o tamanho apenas nos textos principais para n√£o quebrar a tabela
    document.querySelectorAll('p, span, h2').forEach(el => {
        el.style.fontSize = tamanhoFonteAtual + "px";
    });
}

    // Mapeamento de categorias e n√∫meros para cores
    const categoryColors = {
      'noble gas': 'bg-blue-500',
      'alkali metal': 'bg-purple-600',
      'alkaline earth metal': 'bg-red-400',
      'transition metal': 'bg-orange-400',
      'metalloid': 'bg-yellow-500',
      'diatomic nonmetal': 'bg-green-500',
      'nonmetal': 'bg-green-500',
      'halogen': 'bg-pink-500',
      'default': 'bg-gray-300'
    };

    const specificNumberColors = {
        9: 'bg-pink-500', 17: 'bg-pink-500', 35: 'bg-pink-500', 53: 'bg-pink-500', 85: 'bg-pink-500', 117: 'bg-pink-500',
        13: 'bg-teal-500', 31: 'bg-teal-500', 49: 'bg-teal-500', 81: 'bg-teal-500', 113: 'bg-teal-500',
        50: 'bg-teal-500', 82: 'bg-teal-500', 114: 'bg-teal-500', 83: 'bg-teal-500', 115: 'bg-teal-500', 116: 'bg-teal-500',
        84: 'bg-yellow-500' // Pol√¥nio como semimetal
    };

async function carregarElementos() {
  const response = await fetch('https://raw.githubusercontent.com/Bowserinator/Periodic-Table-JSON/master/PeriodicTableJSON.json');
  const data = await response.json();
  const elementos = data.elements.map(e => {
    // ... (mantenha sua l√≥gica de mapeamento de nomes, cores e aplica√ß√µes como est√°)
    const nome = nomesEmPortugues[e.number] || e.name;
    const aplicacao = aplicacoesEmPortugues[e.name] || 'Aplica√ß√£o geral üß™';
    const estadoFisico = estadosFisicos[e.phase] || 'Desconhecido';
    const meltTemp = e.melt ? (e.melt - 273.15) : null;
    const boilTemp = e.boil ? (e.boil - 273.15) : null;
    let cor = categoryColors.default;
    if (specificNumberColors[e.number]) { cor = specificNumberColors[e.number]; } 
    else {
        for (const cat in categoryColors) {
            if (e.category && e.category.includes(cat) && cat !== 'default') {
                cor = categoryColors[cat];
                break;
            }
        }
    }

    return { nome, simbolo: e.symbol, numero: e.number, massa: e.atomic_mass, grupo: e.xpos, periodo: e.ypos, cor, aplicacao, estadoFisico, meltTemp, boilTemp };
  });

  const tabela = document.getElementById('tabela-container');
  let html = '<div class="text-center font-bold"></div>';
  html += Array.from({ length: 18 }, (_, i) => `<div class="text-center font-bold" aria-hidden="true">${i + 1}</div>`).join('');

  for (let p = 1; p <= 9; p++) {
    html += `<div class="text-center font-bold" aria-hidden="true">${p}</div>`;
    for (let g = 1; g <= 18; g++) {
      const el = elementos.find(e => e.grupo === g && e.periodo === p);
      if (el) {
        // AJUSTE DE ACESSIBILIDADE AQUI:
        html += `
          <div class="element ${el.cor} text-white text-center p-2 rounded shadow cursor-pointer hover:brightness-110"
               onclick="showElementInfo('${el.nome}', ${el.numero}, '${el.simbolo}', ${el.massa}, '${el.aplicacao}', '${el.estadoFisico}', ${el.meltTemp}, ${el.boilTemp})"
               data-number="${el.numero}"
               role="button" 
               tabindex="0" 
               aria-label="${el.nome}, s√≠mbolo ${el.simbolo}. N√∫mero at√¥mico ${el.numero}. Clique para ver detalhes e eliminar."
               onkeydown="if(event.key === 'Enter') this.click()"> 
            <div class="text-xs" aria-hidden="true">${el.numero}</div>
            <div class="text-lg font-bold" aria-hidden="true">${el.simbolo}</div>
            <div class="text-xs" aria-hidden="true">${el.nome}</div>
          </div>`;
      } else {
        html += '<div></div>';
      }
    }
  }
  tabela.innerHTML = html;
}

    // Fun√ß√£o para fechar o painel de informa√ß√µes
    function fecharInfo() {
      document.getElementById('info-panel').classList.add('hidden');
      // Remove a borda do elemento que estava selecionado
      const currentSelected = document.querySelector('.element.border-blue-500');
      if (currentSelected) {
        currentSelected.classList.remove('border-blue-500', 'border-4');
      }
      selectedElementNumber = null; // Limpa o elemento selecionado ao fechar o painel
    }

    // Nova fun√ß√£o para eliminar o elemento
    function eliminarElemento() {
      if (selectedElementNumber) {
        const elementToEliminate = document.querySelector(`.element[data-number="${selectedElementNumber}"]`);
        if (elementToEliminate) {
          const nomeElemento = document.getElementById('element-name').innerText;
          elementToEliminate.classList.add('eliminated');
          
          // AJUSTE DE VOZ: Confirma a elimina√ß√£o
          const locutor = document.getElementById('status-voz');
          locutor.innerText = `Elemento ${nomeElemento} eliminado com sucesso.`;
          
          // Ajusta o aria-label para informar que j√° foi removido
          elementToEliminate.setAttribute('aria-label', `${nomeElemento} (Eliminado)`);
    
          fecharInfo(); 
        }
      }
    }

function resetarJogo() {
    // Limpa as elimina√ß√µes visuais
    document.querySelectorAll('.element').forEach(el => el.classList.remove('eliminated'));
    
    // Volta os bot√µes de escolha
    document.getElementById('btn-equipe-a').classList.remove('hidden');
    document.getElementById('btn-equipe-b').classList.remove('hidden');
    document.getElementById('msg-trava').classList.add('hidden');
    document.getElementById('painel-secreto').classList.add('hidden');
    
    // Esconde bot√µes de sorteio manual
    document.getElementById('btn-sortear-a').classList.add('hidden');
    document.getElementById('btn-sortear-b').classList.add('hidden');

    window.minhaEquipe = null; // Reseta a equipe para poder escolher de novo
    fecharInfo();
}

    carregarElementos(); // Chama a fun√ß√£o para carregar elementos ao iniciar a p√°gina

    const perguntas = [
      "O elemento √© um metal?",
      "O elemento √© um ametal?",
      "O elemento √© um g√°s nobre?",
      "O elemento faz parte dos halog√™nios?",
      "O elemento est√° no grupo dos metais alcalinos?",
      "O elemento est√° no grupo dos metais alcalino-terrosos?",
      "O elemento √© um metal de transi√ß√£o?",
      "O elemento √© um semicondutor?",
      "O elemento √© l√≠quido √† temperatura ambiente?",
      "O elemento √© gasoso √† temperatura ambiente?",
      "O elemento √© s√≥lido √† temperatura ambiente?",
      "O elemento est√° localizado no bloco s?",
      "O elemento est√° localizado no bloco p?",
      "O elemento est√° localizado no bloco d?",
      "O elemento est√° localizado no bloco f?",
      "O n√∫mero at√¥mico do elemento √© maior que 30?",
      "O n√∫mero at√¥mico do elemento √© menor que 20?",
      "O n√∫mero at√¥mico do elemento √© par?",
      "O s√≠mbolo qu√≠mico do elemento possui apenas uma letra?",
      "O elemento est√° no per√≠odo 2 da tabela peri√≥dica?",
      "O elemento est√° no per√≠odo 3 da tabela peri√≥dica?",
      "O elemento est√° no per√≠odo 4 ou superior?",
      "O elemento tem n√∫mero at√¥mico maior que 50?",
      "O elemento √© radioativo?",
      "O elemento faz parte dos lantan√≠deos?",
      "O elemento faz parte dos actin√≠deos?",
      "O elemento √© utilizado em baterias?",
      "O elemento √© usado na medicina?",
      "O elemento √© importante para a fabrica√ß√£o de vidros?",
      "O elemento √© amplamente utilizado na produ√ß√£o de joias?",
      "O elemento √© essencial para a vida?",
      "O elemento √© encontrado em estado gasoso na natureza?",
      "O elemento √© usado na constru√ß√£o civil?",
      "O elemento possui propriedades semicondutoras?",
      "O elemento √© utilizado em catalisadores?",
      "O elemento √© um condutor el√©trico eficiente?",
      "O elemento faz parte dos elementos representativos?",
      "O elemento est√° na fam√≠lia dos calcog√™nios?",
      "O elemento tem aplica√ß√£o em fertilizantes?",
      "O elemento √© um elemento sint√©tico?",
      "O elemento √© encontrado na crosta terrestre em grande abund√¢ncia?",
      "O elemento faz parte da s√©rie dos metais pesados?",
      "O elemento √© utilizado em processos nucleares?",
      "O elemento tem s√≠mbolo com duas letras?",
      "O elemento est√° acima do n√∫mero at√¥mico 80?",
      "O elemento pertence ao 6¬∫ per√≠odo da Tabela?",
      "O elemento tem aplica√ß√£o na ind√∫stria de eletr√¥nicos?",
      "O elemento √© um g√°s sob condi√ß√µes ambientes?",
      "O elemento √© tipicamente encontrado como mol√©cula diat√¥mica na natureza?",
      "O elemento √© usado em l√¢mpadas de ilumina√ß√£o?",
      "O elemento √© usado na fabrica√ß√£o de ligas met√°licas?",
      "O elemento √© usado em soldagem ou processos de corte industrial?",
      "O elemento est√° na fam√≠lia dos alcalinos?",
      "O elemento est√° na fam√≠lia dos alcalino-terrosos?",
      "O elemento est√° na fam√≠lia dos halog√™nios?",
      "O elemento est√° na fam√≠lia dos gases nobres?",
      "O elemento pertence ao grupo 13 (fam√≠lia do boro)?",
      "O elemento pertence ao grupo 14 (fam√≠lia do carbono)?",
      "O elemento pertence ao grupo 15 (fam√≠lia do nitrog√™nio)?",
      "O elemento pertence ao grupo 16 (calcog√™nios)?",
      "O elemento pertence ao grupo 17 (halog√™nios)?",
      "O elemento pertence ao grupo 18 (gases nobres)?",
      "O elemento tem aplica√ß√£o na odontologia?",
      "O elemento √© usado na ind√∫stria aeroespacial?",
      "O elemento √© altamente reativo com a √°gua?",
      "O elemento √© encontrado na forma met√°lica pura na natureza?",
      "O elemento √© amplamente usado como pigmento ou corante?",
      "O elemento √© utilizado como agente desinfetante?",
      "O elemento √© usado em term√¥metros?",
      "O elemento √© considerado t√≥xico?",
      "O elemento √© essencial para processos biol√≥gicos?",
      "O elemento √© magn√©tico?",
      "O elemento √© inflam√°vel?",
      "O elemento pode ser encontrado em forma l√≠quida sem necessidade de alta press√£o ou temperatura?",
      "O elemento tem baixa densidade?",
      "O elemento √© usado em explosivos ou fogos de artif√≠cio?",
      "O elemento √© um bom refletor de luz (usado em espelhos, por exemplo)?"
    ];

    function gerarPergunta() {
      const index = Math.floor(Math.random() * perguntas.length);
      document.getElementById("pergunta-gerada").innerText = perguntas[index];
    }
  </script> 

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
  import { getDatabase, ref, set, onValue, get } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-database.js";

  const firebaseConfig = {
    apiKey: "AIzaSyAW-W-KwHDASydFozTjXCLL5RYZpwemsTw",
    databaseURL: "https://quem-sou-eu-tabela-periodica-default-rtdb.firebaseio.com",
    projectId: "quem-sou-eu-tabela-periodica",
  };

  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);

  window.minhaEquipe = null; 

  // Fun√ß√£o auxiliar para o locutor de voz
  const anunciarVoz = (mensagem) => {
    const locutor = document.getElementById('status-voz');
    if (locutor) locutor.innerText = mensagem;
  };

  // --- 1. CONECTAR √Ä SALA COM FEEDBACK ---
  window.conectarSala = () => {
    const salaInput = document.getElementById('codigo-sala');
    const sala = salaInput.value.trim().toUpperCase();
    const statusTxt = document.getElementById('status-sala');

    if (!sala) return alert("Por favor, digite um c√≥digo (ex: QUIMICA01)");

    const salaRef = ref(db, 'salas/' + sala);
    
    onValue(salaRef, (snapshot) => {
        const data = snapshot.val();
        if (data) {
            if (data.elementosDaRodada) atualizarVisualTabela(data.elementosDaRodada);

            const painel = document.getElementById('painel-secreto');
            const display = document.getElementById('display-elemento-secreto');

            if (minhaEquipe) {
                let segredoData = (minhaEquipe === 'A') ? data.elementoSecretoA : data.elementoSecretoB;

                if (segredoData && segredoData.id) {
                    painel.classList.remove('hidden');
                    const nome = nomesEmPortugues[segredoData.id] || "Elemento";
                    display.innerHTML = `#${segredoData.id} ${nome}`;
                    // FEEDBACK DE VOZ: Anuncia o elemento secreto
                    anunciarVoz(`Seu elemento secreto foi definido: ${nome}, n√∫mero ${segredoData.id}.`);
                } else {
                    painel.classList.add('hidden');
                }
            }
        }
    });

    statusTxt.innerHTML = `Conectado √† sala: <b class="text-indigo-600">${sala}</b> ‚úÖ`;
    statusTxt.classList.remove('text-gray-500');
    statusTxt.classList.add('text-green-600');
    anunciarVoz(`Conectado com sucesso √† sala ${sala}`);
  };

  window.definirEquipe = (equipe) => {
    const sala = document.getElementById('codigo-sala').value.trim().toUpperCase();
    if (!sala) return alert("Conecte-se √† sala primeiro!");
    
    window.minhaEquipe = equipe; 

    document.getElementById('btn-equipe-a').classList.toggle('hidden', equipe !== 'A');
    document.getElementById('btn-equipe-b').classList.toggle('hidden', equipe !== 'B');
    document.getElementById('btn-sortear-a').classList.toggle('hidden', equipe !== 'A');
    document.getElementById('btn-sortear-b').classList.toggle('hidden', equipe !== 'B');
    document.getElementById('msg-trava').classList.remove('hidden');

    const painel = document.getElementById('painel-secreto');
    painel.style.backgroundColor = (equipe === 'A') ? "#2563eb" : "#db2777";
    
    anunciarVoz(`Voc√™ entrou na Equipe ${equipe}.`);

    const caminhoSegredo = `salas/${sala}/elementoSecreto${equipe}`;
    get(ref(db, caminhoSegredo)).then((snapshot) => {
        if (!snapshot.exists()) {
            get(ref(db, `salas/${sala}/elementosDaRodada`)).then((s) => {
                const lista = s.val();
                if (lista) {
                    const sorteado = lista[Math.floor(Math.random() * lista.length)];
                    set(ref(db, caminhoSegredo), { id: sorteado, ts: Date.now() });
                }
            });
        }
    });
  };

  window.sortearParaAdversario = (grupoAlvo) => {
    const sala = document.getElementById('codigo-sala').value.trim().toUpperCase();
    const salaRef = ref(db, `salas/${sala}`);
    
    get(salaRef).then((snapshot) => {
        const data = snapshot.val();
        if (!data || !data.elementosDaRodada) return alert("Gere os 24 elementos primeiro!");

        const lista = data.elementosDaRodada;
        const novoId = lista[Math.floor(Math.random() * lista.length)];

        set(ref(db, `salas/${sala}/elementoSecreto${grupoAlvo}`), { id: novoId, ts: Date.now() })
        .then(() => {
          const nomeNovo = nomesEmPortugues[novoId];
          anunciarVoz(`Novo elemento secreto gerado para o grupo ${grupoAlvo}: ${nomeNovo}`);
          alert("Novo elemento secreto gerado para o " + grupoAlvo);
        });
    });
  };

  window.sortearElementosParaSala = () => {
    const sala = document.getElementById('codigo-sala').value.trim().toUpperCase();
    if (!sala) return alert("Conecte-se!");

    const categorias = [
      { ids: [3, 11, 19, 37, 55, 87] }, { ids: [4, 12, 20, 38, 56, 88] },
      { ids: [2, 10, 18, 36, 54, 86] }, { ids: [9, 17, 35, 53, 85] }, { ids: [6, 7, 8, 15, 16, 34] }
    ];
    let sorteados = [];
    categorias.forEach(cat => {
      const emb = cat.ids.sort(() => 0.5 - Math.random());
      sorteados.push(...emb.slice(0, 3));
    });
    while(sorteados.length < 24) {
      const n = Math.floor(Math.random() * 118) + 1;
      if(!sorteados.includes(n)) sorteados.push(n);
    }
    
    set(ref(db, `salas/${sala}`), {
        elementosDaRodada: sorteados,
        elementoSecretoA: null,
        elementoSecretoB: null
    }).then(() => {
        anunciarVoz("Uma nova rodada foi gerada. Vinte e quatro elementos foram selecionados na tabela.");
        alert("Nova rodada de 24 elementos sincronizada para todos!");
    });
  };

window.darPalpite = () => {
    const sala = document.getElementById('codigo-sala').value.trim().toUpperCase();
    if (!sala || !window.minhaEquipe) {
        alert("Voc√™ precisa entrar em uma sala e escolher uma equipe primeiro!");
        return;
    }

    // Descobre quem √© o advers√°rio
    const equipeAdversaria = (window.minhaEquipe === 'A') ? 'B' : 'A';
    const caminhoAdversario = `salas/${sala}/elementoSecreto${equipeAdversaria}`;

    // Busca o segredo do advers√°rio no Firebase
    get(ref(db, caminhoAdversario)).then((snapshot) => {
        const segredo = snapshot.val();
        if (!segredo) {
            alert("O advers√°rio ainda n√£o sorteou um elemento!");
            return;
        }

        const nomeElemento = document.getElementById('element-name').innerText;

        // Compara o n√∫mero do elemento aberto (window.selectedElementNumber) com o segredo
        if (window.selectedElementNumber === segredo.id) {
            const vitoriaMsg = `üéâ VIT√ìRIA! Voc√™ acertou! O elemento secreto da Equipe ${equipeAdversaria} era o ${nomeElemento}!`;
            alert(vitoriaMsg);
            anunciarVoz(vitoriaMsg);
          
            // DISPARA O CONFETE
            confetti({
                particleCount: 150,
                spread: 70,
                origin: { y: 0.6 },
                colors: ['#22c55e', '#3b82f6', '#ef4444', '#eab308']
            }); // <-- Faltava fechar o par√™ntese do confetti aqui
          
        } else {
            const erroMsg = `‚ùå ERRADO! O elemento secreto n√£o √© o ${nomeElemento}. Perdeu a vez!`;
            alert(erroMsg);
            anunciarVoz(erroMsg);
        }
    }).catch((error) => {
        console.error("Erro no Firebase:", error);
    }); // <-- Faltava fechar o par√™ntese do .then() aqui
};
  
  function atualizarVisualTabela(idsSorteados) {
    document.querySelectorAll('.element').forEach(card => {
        const num = parseInt(card.getAttribute('data-number'));
        const isAceso = idsSorteados.includes(num);
        card.style.opacity = isAceso ? "1" : "0.15";
        card.style.filter = isAceso ? "none" : "grayscale(100%)";
        card.style.pointerEvents = isAceso ? "auto" : "none";
        
        // Atualiza ARIA label para refletir se o elemento est√° em jogo ou n√£o
        const nome = card.querySelector('.text-xs:last-child').innerText;
        if (!isAceso) {
          card.setAttribute('aria-label', `${nome}. Fora da rodada.`);
        }
    });
  }
</script>

<button onclick="toggleAcessibilidade()" class="fixed bottom-5 right-5 z-[100] bg-blue-600 p-3 rounded-full shadow-lg hover:scale-110 transition-all">
        <img src="https://upload.wikimedia.org/wikipedia/commons/d/db/Symbol_accessibility_blue_square.svg" class="w-10 h-10" alt="Acessibilidade">
    </button>

    <div id="menu-acessibilidade" class="hidden fixed bottom-20 right-5 bg-white p-4 rounded-xl shadow-2xl border-2 border-blue-500 w-64 z-[100]">
        <h3 class="font-bold text-blue-800 mb-3 border-b pb-1">Acessibilidade</h3>
        <div class="flex flex-col gap-2">
            <button onclick="anunciarVozNovamente()" class="bg-gray-100 p-2 rounded text-left hover:bg-blue-50 text-sm text-black">üîä Repetir Narra√ß√£o</button>
            <button onclick="mudarFonte(2)" class="bg-gray-100 p-2 rounded text-left hover:bg-blue-50 text-sm text-black">‚ûï Aumentar Texto</button>
            <button onclick="mudarFonte(-2)" class="bg-gray-100 p-2 rounded text-left hover:bg-blue-50 text-sm text-black">‚ûñ Diminuir Texto</button>
            <button onclick="window.speechSynthesis.cancel()" class="bg-red-100 text-red-700 p-2 rounded text-left hover:bg-red-200 text-sm">üö´ Parar Voz</button>
        </div>
    </div>
  
</body>
</html>
